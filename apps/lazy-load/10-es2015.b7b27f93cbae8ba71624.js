(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"Z+F6":function(t,e,o){"use strict";o.r(e),o.d(e,"RouteTwoModule",(function(){return tt}));var r=o("2kYt"),n=o("sEIs"),s=o("D57K"),i=o("MJ1a"),c=o("yDe4"),a=o("IdLP"),l=o("8htw"),u=o("LTOS"),p=o("nIj0"),m=o("EM62");let h=(()=>{class t{}return t.\u0275mod=m.Sb({type:t}),t.\u0275inj=m.Rb({factory:function(e){return new(e||t)},imports:[[r.c,u.c,p.s]]}),t})();var d=o("qFEQ"),b=o("OZ4H"),f=o("PBFl"),y=o("bFHC"),g=o("29Wa"),v=o("R7+U"),I=o("mFH5");let w=(()=>{class t{constructor(){this.revertChange=new m.q}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Ob({type:t,selectors:[["rms-frontend-history-segment"]],inputs:{history:"history",canEdit:"canEdit"},outputs:{revertChange:"revertChange"},decls:19,vars:8,consts:[["fxLayout","column"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","1 1 auto"],["mat-icon-button","",3,"click"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"change-segment"],[3,"innerHTML"],["aria-hidden","false","aria-label","Arrow Icon",1,"icon",3,"inline"]],template:function(t,e){1&t&&(m.ac(0,"div",0),m.ac(1,"div",1),m.ac(2,"span"),m.ac(3,"strong"),m.Kc(4),m.Zb(),m.Kc(5," updated "),m.ac(6,"strong"),m.Kc(7),m.Zb(),m.Kc(8),m.nc(9,"date"),m.Zb(),m.Vb(10,"span",2),m.ac(11,"button",3),m.ic("click",(function(){return e.revertChange.emit(e.history)})),m.ac(12,"mat-icon"),m.Kc(13,"undo"),m.Zb(),m.Zb(),m.Zb(),m.ac(14,"div",4),m.Vb(15,"span",5),m.ac(16,"mat-icon",6),m.Kc(17,"arrow_forward"),m.Zb(),m.Vb(18,"span",5),m.Zb(),m.Zb()),2&t&&(m.Ib(4),m.Lc(e.history.user),m.Ib(3),m.Lc(e.history.field),m.Ib(1),m.Mc(" ",m.oc(9,6,e.history.date)," "),m.Ib(7),m.tc("innerHTML",e.history.oldValue||"<em>Blank</em>",m.Cc),m.Ib(1),m.tc("inline",!0),m.Ib(2),m.tc("innerHTML",e.history.newValue||"<em>Blank</em>",m.Cc))},directives:[d.c,d.b,d.a,f.a,y.a],pipes:[r.e],styles:[".segment[_ngcontent-%COMP%]{margin:10px;background-color:var(--alternate-card-color)}.icon[_ngcontent-%COMP%], .segment[_ngcontent-%COMP%]{font-size:large}.icon[_ngcontent-%COMP%]{margin:5px}.change-segment[_ngcontent-%COMP%]{margin-top:-10px}"]}),t})();var C=o("4+zl");function O(t,e){if(1&t&&(m.ac(0,"mat-option",6),m.Kc(1),m.Zb()),2&t){const t=e.$implicit;m.tc("value",t),m.Ib(1),m.Lc(t)}}function Z(t,e){if(1&t&&(m.ac(0,"mat-option",6),m.Kc(1),m.Zb()),2&t){const t=e.$implicit;m.tc("value",t),m.Ib(1),m.Lc(t)}}function F(t,e){1&t&&m.Vb(0,"hr")}function x(t,e){if(1&t){const t=m.bc();m.ac(0,"div"),m.Ic(1,F,1,0,"hr",8),m.ac(2,"rms-frontend-history-segment",9),m.ic("revertChange",(function(e){return m.Bc(t),m.mc().revertChange.emit(e)})),m.Zb(),m.Zb()}if(2&t){const t=e.$implicit,o=e.index,r=e.first,n=m.mc();m.Ib(1),m.tc("ngIf",!r&&t.date!=n.filterHistories()[o-1].date),m.Ib(1),m.tc("history",t)("canEdit",n.canEdit)}}let k=(()=>{class t{constructor(){this.revertChange=new m.q,this.fieldFilter=new p.e,this.userFilter=new p.e,this.sort=new p.e}ngOnInit(){}getFilter(t){return[...new Set(this.histories.map(e=>e[t]))]}filterHistories(){let t=this.histories;const e=this.fieldFilter.value,o=this.userFilter.value;return(null==e?void 0:e.length)&&(t=t.filter(t=>e.includes(t.field))),(null==o?void 0:o.length)&&(t=t.filter(t=>o.includes(t.user))),t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Ob({type:t,selectors:[["rms-frontend-history-list"]],inputs:{histories:"histories",canEdit:"canEdit"},outputs:{revertChange:"revertChange"},decls:22,vars:13,consts:[["fxFlex","","flexlayout","column"],["fxLayoutAlign","space-between"],[1,"filters"],["multiple","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"formControl","value"],[3,"value"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"history","canEdit","revertChange"]],template:function(t,e){1&t&&(m.ac(0,"div",0),m.ac(1,"span",1),m.ac(2,"mat-form-field",2),m.ac(3,"mat-label"),m.Kc(4,"Field"),m.Zb(),m.ac(5,"mat-select",3),m.Ic(6,O,2,2,"mat-option",4),m.Zb(),m.Zb(),m.ac(7,"mat-form-field",2),m.ac(8,"mat-label"),m.Kc(9,"User"),m.Zb(),m.ac(10,"mat-select",3),m.Ic(11,Z,2,2,"mat-option",4),m.Zb(),m.Zb(),m.ac(12,"mat-form-field",2),m.ac(13,"mat-label"),m.Kc(14,"Sort"),m.Zb(),m.ac(15,"mat-select",5),m.ac(16,"mat-option",6),m.Kc(17," Least Recent"),m.Zb(),m.ac(18,"mat-option",6),m.Kc(19," Most Recent"),m.Zb(),m.Zb(),m.Zb(),m.Zb(),m.Ic(20,x,3,3,"div",7),m.nc(21,"orderBy"),m.Zb()),2&t&&(m.Ib(5),m.tc("formControl",e.fieldFilter),m.Ib(1),m.tc("ngForOf",e.getFilter("field")),m.Ib(4),m.tc("formControl",e.userFilter),m.Ib(1),m.tc("ngForOf",e.getFilter("user")),m.Ib(4),m.tc("formControl",e.sort)("value","asc"),m.Ib(1),m.tc("value","asc"),m.Ib(2),m.tc("value","desc"),m.Ib(2),m.tc("ngForOf",m.qc(21,9,e.filterHistories(),e.sort.value,"date")))},directives:[d.a,d.b,g.b,g.e,v.a,p.o,p.f,r.k,I.n,r.l,w],pipes:[C.a],styles:[".filters[_ngcontent-%COMP%]{width:100px}"]}),t})(),q=(()=>{class t{constructor(){this.revertChange=new m.q}ngOnInit(){}emit(t){this.revertChange.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Ob({type:t,selectors:[["rms-frontend-history-modal"]],outputs:{revertChange:"revertChange"},decls:10,vars:4,consts:[["fxLayout","row"],["mat-dialog-title",""],["fxFlex","1 1 auto"],["mat-icon-button","","mat-dialog-close",""],[3,"histories","canEdit","revertChange"]],template:function(t,e){1&t&&(m.ac(0,"div",0),m.ac(1,"h1",1),m.Kc(2,"History"),m.Zb(),m.Vb(3,"span",2),m.ac(4,"button",3),m.ac(5,"mat-icon"),m.Kc(6," close "),m.Zb(),m.Zb(),m.Zb(),m.ac(7,"mat-dialog-content"),m.ac(8,"rms-frontend-history-list",4),m.ic("revertChange",(function(t){return e.emit(t)})),m.nc(9,"async"),m.Zb(),m.Zb()),2&t&&(m.Ib(8),m.tc("histories",m.oc(9,2,e.histories))("canEdit",e.canEdit))},directives:[d.c,b.g,d.a,f.a,b.c,y.a,b.d,k],pipes:[r.b],styles:[""]}),t})();var D=o("ZTXN"),_=o("Ohay"),K=o("kuMc"),S=o("mWib");class E{constructor(t){this.payload=t}static get type(){return"[Forms] Update Form Status"}}class L{constructor(t){this.payload=t}static get type(){return"[Forms] Update Form Value"}}class M{constructor(t){this.payload=t}static get type(){return"[Forms] Update Form"}}class V{constructor(t){this.payload=t}static get type(){return"[Forms] Update Form Dirty"}}class G{constructor(t){this.payload=t}static get type(){return"[Forms] Update Form Errors"}}let $=(()=>{class t{constructor(t,e,o){this._store=t,this._formGroupDirective=e,this._cd=o,this.path=null,this.debounce=100,this.clearDestroy=!1,this._destroy$=new D.a,this._updating=!1}ngOnInit(){this.getStateStream(`${this.path}.model`).subscribe(t=>{!this._updating&&t&&(this.form.patchValue(t),this._cd.markForCheck())}),this.getStateStream(`${this.path}.dirty`).subscribe(t=>{this.form.dirty!==t&&"boolean"==typeof t&&(t?this.form.markAsDirty():this.form.markAsPristine(),this._cd.markForCheck())}),this._store.selectOnce(t=>Object(c.m)(t,this.path)).subscribe(()=>{this._store.dispatch([new L({path:this.path,value:this.form.getRawValue()}),new E({path:this.path,status:this.form.status}),new V({path:this.path,dirty:this.form.dirty})])}),this.getStateStream(`${this.path}.disabled`).subscribe(t=>{this.form.disabled!==t&&"boolean"==typeof t&&(t?this.form.disable():this.form.enable(),this._cd.markForCheck())}),this._formGroupDirective.valueChanges.pipe(this.debounceChange()).subscribe(()=>{const t=this._formGroupDirective.control.getRawValue();this._updating=!0,this._store.dispatch([new L({path:this.path,value:t}),new V({path:this.path,dirty:this._formGroupDirective.dirty}),new G({path:this.path,errors:this._formGroupDirective.errors})]).subscribe({error:()=>this._updating=!1,complete:()=>this._updating=!1})}),this._formGroupDirective.statusChanges.pipe(Object(_.a)(),this.debounceChange()).subscribe(t=>{this._store.dispatch(new E({status:t,path:this.path}))})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this.clearDestroy&&this._store.dispatch(new M({path:this.path,value:null,dirty:null,status:null,errors:null}))}debounceChange(){return"change"!==this._formGroupDirective.control.updateOn||this.debounce<0?t=>t.pipe(Object(K.a)(this._destroy$)):t=>t.pipe(Object(S.a)(this.debounce),Object(K.a)(this._destroy$))}get form(){return this._formGroupDirective.form}getStateStream(t){return this._store.select(e=>Object(c.m)(e,t)).pipe(Object(K.a)(this._destroy$))}}return t.\u0275fac=function(e){return new(e||t)(m.Ub(c.i),m.Ub(p.i),m.Ub(m.i))},t.\u0275dir=m.Pb({type:t,selectors:[["","ngxsForm",""]],inputs:{path:["ngxsForm","path"],debounce:["ngxsFormDebounce","debounce"],clearDestroy:["ngxsFormClearOnDestroy","clearDestroy"]}}),t})();class j{constructor(t={}){this.value=t.value,this.key=t.key||"",this.label=t.label||"",this.required=!!t.required,this.order=void 0===t.order?1:t.order,this.controlType=t.controlType||"",this.type=t.type||""}}var H=o("Cd2c");function U(t,e){if(1&t&&(m.ac(0,"mat-form-field"),m.ac(1,"mat-label"),m.Kc(2),m.Zb(),m.Vb(3,"input",4),m.Zb()),2&t){const t=m.mc();m.Ib(2),m.Lc(t.question.label),m.Ib(1),m.tc("placeholder",t.question.label)("id",t.question.key)("type",t.question.type)("formControlName",t.question.key)}}function P(t,e){if(1&t&&(m.ac(0,"mat-option",7),m.Kc(1),m.Zb()),2&t){const t=e.$implicit;m.tc("value",t.key),m.Ib(1),m.Mc(" ",t.value," ")}}function R(t,e){if(1&t&&(m.ac(0,"mat-form-field"),m.ac(1,"mat-label"),m.Kc(2),m.Zb(),m.ac(3,"mat-select",5),m.Ic(4,P,2,2,"mat-option",6),m.Zb(),m.Zb()),2&t){const t=m.mc();m.Ib(2),m.Lc(t.question.label),m.Ib(1),m.tc("formControlName",t.question.key),m.Ib(1),m.tc("ngForOf",t.question.options)}}function T(t,e){if(1&t&&(m.ac(0,"div",8),m.Kc(1),m.Zb()),2&t){const t=m.mc();m.Ib(1),m.Mc(" ",t.question.label," is required ")}}let A=(()=>{class t{get isValid(){return this.form.controls[this.question.key].valid}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Ob({type:t,selectors:[["app-question"]],inputs:{question:"question",form:"form"},decls:5,vars:5,consts:[[3,"formGroup"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","errorMessage",4,"ngIf"],["matInput","",3,"placeholder","id","type","formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"errorMessage"]],template:function(t,e){1&t&&(m.ac(0,"div",0),m.ac(1,"div",1),m.Ic(2,U,4,5,"mat-form-field",2),m.Ic(3,R,5,3,"mat-form-field",2),m.Zb(),m.Ic(4,T,2,1,"div",3),m.Zb()),2&t&&(m.tc("formGroup",e.form),m.Ib(1),m.tc("ngSwitch",e.question.controlType),m.Ib(1),m.tc("ngSwitchCase","textbox"),m.Ib(1),m.tc("ngSwitchCase","dropdown"),m.Ib(1),m.tc("ngIf",!e.isValid))},directives:[p.p,p.i,r.n,r.o,r.l,g.b,g.e,H.b,p.b,p.o,p.g,v.a,r.k,I.n],encapsulation:2}),t})();function B(t,e){if(1&t&&(m.ac(0,"div",2),m.Vb(1,"app-question",3),m.Zb()),2&t){const t=e.$implicit,o=m.mc();m.Ib(1),m.tc("question",t)("form",o.form)}}let N=(()=>{class t{constructor(){this.questions=[],this.clearOnDestroy=!1,this.payLoad=""}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Ob({type:t,selectors:[["dynamic-form"]],inputs:{questions:"questions",form:"form",clearOnDestroy:"clearOnDestroy"},decls:3,vars:3,consts:[["ngxsForm","dynamicForms.formGroup","autocomplete","off",3,"formGroup","ngxsFormClearOnDestroy"],["class","form-row",4,"ngFor","ngForOf"],[1,"form-row"],[3,"question","form"]],template:function(t,e){1&t&&(m.ac(0,"div"),m.ac(1,"form",0),m.Ic(2,B,2,2,"div",1),m.Zb(),m.Zb()),2&t&&(m.Ib(1),m.tc("formGroup",e.form)("ngxsFormClearOnDestroy",e.clearOnDestroy),m.Ib(1),m.tc("ngForOf",e.questions))},directives:[p.u,p.p,$,p.i,r.k,A],encapsulation:2}),t})(),z=(()=>{class t{constructor(){this.outputEvent=new m.q}ngOnInit(){this.form=this.toFormGroup(this.questions)}saveAsDraft(){this.outputEvent.emit(this.form.value)}toFormGroup(t){let e={};return t.forEach(t=>{e[t.key]=t.required?new p.e(t.value||"",p.t.required):new p.e(t.value||"")}),new p.h(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Ob({type:t,selectors:[["rms-dynamic-form-modal"]],inputs:{questions:"questions",clearOnDestroy:"clearOnDestroy"},outputs:{outputEvent:"outputEvent"},decls:9,vars:3,consts:[["mat-dialog-title",""],[3,"form","questions","clearOnDestroy"],["mat-raised-button","","color","primary","mat-dialog-close","",3,"click"],["mat-raised-button","","mat-dialog-close",""]],template:function(t,e){1&t&&(m.ac(0,"div"),m.Vb(1,"h1",0),m.ac(2,"mat-dialog-content"),m.Vb(3,"dynamic-form",1),m.Zb(),m.ac(4,"mat-dialog-actions"),m.ac(5,"button",2),m.ic("click",(function(){return e.saveAsDraft()})),m.Kc(6," Submit "),m.Zb(),m.ac(7,"button",3),m.Kc(8,"Cancel"),m.Zb(),m.Zb(),m.Zb()),2&t&&(m.Ib(3),m.tc("form",e.form)("questions",e.questions)("clearOnDestroy",e.clearOnDestroy))},directives:[b.g,b.d,N,b.b,f.a,b.c],styles:[""]}),t})();class J extends j{constructor(t={}){super(t),this.controlType="dropdown",this.options=[],this.options=t.options||[]}}class Q extends j{constructor(t={}){super(t),this.controlType="textbox",this.type=t.type||""}}var W=o("nsO7");const X=[{path:"",component:(()=>{class t{constructor(t,e){this.store=t,this.dialog=e,this.userControl=new p.e,this.person={name:"",description:"",favColor:""},this.version=0}ngOnInit(){this.userControl.setValue("Steve")}openHistory(){const t=this.dialog.open(q,{width:"500px"});t.componentInstance.histories=this.histories$,t.componentInstance.canEdit=!0,t.componentInstance.revertChange.subscribe(t=>{const e=W.cloneDeep(this.person);e[t.field]=t.oldValue,this.onSave(e)}),t.afterClosed().subscribe(t=>{})}openForms(){const t=this.dialog.open(z,{width:"500px"});t.componentInstance.questions=this.getQuestions(),t.componentInstance.clearOnDestroy=!1,t.componentInstance.outputEvent.subscribe(t=>{this.onSave(t)}),t.afterClosed().subscribe(t=>{})}getQuestions(){var t,e,o;return[new J({key:"favColor",label:"Favorite Color",options:[{key:"Orange",value:"Orange"},{key:"Green",value:"Green"},{key:"Blue",value:"Blue"},{key:"Red",value:"Red"}],value:null===(t=this.person)||void 0===t?void 0:t.favColor,order:3}),new Q({key:"name",label:"Name",value:null===(e=this.person)||void 0===e?void 0:e.name,order:1}),new Q({key:"description",label:"Description",type:"textbox",value:null===(o=this.person)||void 0===o?void 0:o.description,order:2})].sort((t,e)=>t.order-e.order)}onSave(t){const e=new Date;Object.keys(this.person).forEach(o=>{t[o]!=this.person[o]&&(this.store.dispatch(new l.a({user:this.userControl.value,version:this.version,date:e,newValue:t[o],oldValue:this.person[o],field:o})),this.person[o]=t[o])})}}return t.\u0275fac=function(e){return new(e||t)(m.Ub(c.i),m.Ub(b.a))},t.\u0275cmp=m.Ob({type:t,selectors:[["lazy-load-route-two"]],decls:19,vars:7,consts:[["fxFlex",""],["mat-raised-button","","color","accent","routerLink","/home",2,"margin","20px"],["mat-raised-button","","color","accent",2,"margin","20px",3,"click"],["mat-raised-button","","color","accent",2,"margin","20px",3,"disabled","click"],["fxLayout","column"],[2,"margin","10px","width","120px"],["matInput","","placeholder","user","id","userVal",3,"formControl"],[2,"margin","10px"]],template:function(t,e){1&t&&(m.ac(0,"div",0),m.ac(1,"button",1),m.Kc(2," Lazy-App Home "),m.Zb(),m.ac(3,"button",2),m.ic("click",(function(){return e.openForms()})),m.Kc(4," Edit Person "),m.Zb(),m.ac(5,"button",3),m.ic("click",(function(){return e.openHistory()})),m.nc(6,"async"),m.Kc(7," History Modal "),m.Zb(),m.ac(8,"div",4),m.ac(9,"mat-form-field",5),m.ac(10,"mat-label"),m.Kc(11,"User"),m.Zb(),m.Vb(12,"input",6),m.Zb(),m.ac(13,"span",7),m.Kc(14),m.Zb(),m.ac(15,"span",7),m.Kc(16),m.Zb(),m.ac(17,"span",7),m.Kc(18),m.Zb(),m.Zb(),m.Zb()),2&t&&(m.Ib(5),m.tc("disabled",0==m.oc(6,5,e.histories$).length),m.Ib(7),m.tc("formControl",e.userControl),m.Ib(2),m.Mc(" Name: ",e.person.name," "),m.Ib(2),m.Mc(" Description: ",e.person.description," "),m.Ib(2),m.Mc(" Favorite Color: ",e.person.favColor," "))},directives:[d.a,f.a,n.h,d.c,g.b,g.e,H.b,p.b,p.o,p.f],pipes:[r.b],styles:[""]}),Object(s.b)([Object(c.e)(i.a.getHistories),Object(s.c)("design:type",a.a)],t.prototype,"histories$",void 0),t})()}];let Y=(()=>{class t{}return t.\u0275mod=m.Sb({type:t}),t.\u0275inj=m.Rb({factory:function(e){return new(e||t)},imports:[[n.i.forChild(X)],n.i]}),t})(),tt=(()=>{class t{}return t.\u0275mod=m.Sb({type:t}),t.\u0275inj=m.Rb({factory:function(e){return new(e||t)},imports:[[r.c,u.c,p.s,Y,h]]}),t})()}}]);